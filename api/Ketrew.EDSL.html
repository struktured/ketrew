<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="style.css" type="text/css">
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
<link rel="Start" href="index.html">
<link rel="previous" href="Ketrew.Error.html">
<link rel="Up" href="Ketrew.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of class methods" rel=Appendix href="index_methods.html">
<link title="Index of class types" rel=Appendix href="index_class_types.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Index of module types" rel=Appendix href="index_module_types.html">
<link title="Ketrew" rel="Chapter" href="Ketrew.html">
<link title="Ketrew_artifact" rel="Chapter" href="Ketrew_artifact.html">
<link title="Ketrew_command_line" rel="Chapter" href="Ketrew_command_line.html">
<link title="Ketrew_configuration" rel="Chapter" href="Ketrew_configuration.html">
<link title="Ketrew_daemonize" rel="Chapter" href="Ketrew_daemonize.html">
<link title="Ketrew_database" rel="Chapter" href="Ketrew_database.html">
<link title="Ketrew_edsl" rel="Chapter" href="Ketrew_edsl.html">
<link title="Ketrew_error" rel="Chapter" href="Ketrew_error.html">
<link title="Ketrew_host" rel="Chapter" href="Ketrew_host.html">
<link title="Ketrew_long_running" rel="Chapter" href="Ketrew_long_running.html">
<link title="Ketrew_lsf" rel="Chapter" href="Ketrew_lsf.html">
<link title="Ketrew_monitored_script" rel="Chapter" href="Ketrew_monitored_script.html">
<link title="Ketrew_path" rel="Chapter" href="Ketrew_path.html">
<link title="Ketrew_pervasives" rel="Chapter" href="Ketrew_pervasives.html">
<link title="Ketrew_program" rel="Chapter" href="Ketrew_program.html">
<link title="Ketrew_state" rel="Chapter" href="Ketrew_state.html">
<link title="Ketrew_target" rel="Chapter" href="Ketrew_target.html">
<link title="Ketrew_unix_process" rel="Chapter" href="Ketrew_unix_process.html">
<link title="Ketrew_user_command" rel="Chapter" href="Ketrew_user_command.html"><link title="Hosts" rel="Section" href="#3_Hosts">
<link title="Build Programs" rel="Section" href="#3_BuildPrograms">
<link title="Artifacts" rel="Section" href="#3_Artifacts">
<link title="Targets" rel="Section" href="#3_Targets">
<link title="Workflows" rel="Section" href="#3_Workflows">
<title>Ketrew API : Ketrew.EDSL</title>
</head>
<body>
<div class="navbar"><a class="pre" href="Ketrew.Error.html" title="Ketrew.Error">Previous</a>
&nbsp;<a class="up" href="Ketrew.html" title="Ketrew">Up</a>
&nbsp;</div>
<h1>Module <a href="type_Ketrew.EDSL.html">Ketrew.EDSL</a> (<a href="code_Ketrew.EDSL.html">.ml</a>)</h1>

<pre><span class="keyword">module</span> EDSL: <code class="type">Ketrew_edsl</code></pre><hr width="100%">
<br>
This is a more hopefully stable EDSL/API to make workflows and
  deal with the system.
<p>

  Many functions may raise exceptions when called on improperly, but this
  should happen while building the workflow, not after it starts running.<br>
<br>
<h3 id="3_Hosts">Hosts</h3><br>

<pre><span id="TYPEhost"><span class="keyword">type</span> <code class="type"></code>host</span> = <code class="type"><a href="Ketrew_host.html#TYPEt">Ketrew_host.t</a></code> </pre>
<div class="info ">
Alias for the host type.<br>
</div>


<pre><span id="VALparse_host"><span class="keyword">val</span> <a href="code_VALKetrew_edsl.parse_host.html">parse_host</a></span> : <code class="type">string -> <a href="Ketrew_edsl.html#TYPEhost">host</a></code></pre><div class="info ">
See <a href="Ketrew_host.html#VALof_uri"><code class="code"><span class="constructor">Ketrew_host</span>.of_uri</code></a>.<br>
</div>

<pre><span id="VALhost_cmdliner_term"><span class="keyword">val</span> <a href="code_VALKetrew_edsl.host_cmdliner_term.html">host_cmdliner_term</a></span> : <code class="type">?doc:string -><br>       [ `Flag of string list | `Required of int ] -> <a href="Ketrew_host.html#TYPEt">Ketrew_host.t</a> Cmdliner.Term.t</code></pre><div class="info ">
Cmdliner term which creates a host argument or flag.
    <code class="code"><span class="keywordsign">`</span><span class="constructor">Required</span> n</code> will be an anonymous argument at position <code class="code">n</code>; 
    <code class="code"><span class="keywordsign">`</span><span class="constructor">Flag</span> [<span class="string">"option-name"</span>; <span class="string">"O"</span>]</code> will create an optional
    flag <code class="code"><span class="string">"--option-name"</span></code> (aliased to <code class="code"><span class="string">"-O"</span></code>) whose default value is
    the host <code class="code"><span class="string">"/tmp/"</span></code> (i.e. Localhost with <code class="code"><span class="string">"/tmp"</span></code> as “playground”).<br>
</div>
<br>
<h3 id="3_BuildPrograms">Build Programs</h3><br>

<pre><span class="keyword">module</span> <a href="Ketrew_edsl.Program.html">Program</a>: <code class="code"><span class="keyword">sig</span></code> <a href="Ketrew_edsl.Program.html">..</a> <code class="code"><span class="keyword">end</span></code></pre><div class="info">
Build “things to run”.
</div>
<br>
<h3 id="3_Artifacts">Artifacts</h3><br>

<pre><span id="TYPEuser_artifact"><span class="keyword">class type</span> <a href="Ketrew_edsl.user_artifact-c.html">user_artifact</a></span> = <code class="code"><span class="keyword">object</span></code> <a href="Ketrew_edsl.user_artifact-c.html">..</a> <code class="code"><span class="keyword">end</span></code></pre><div class="info">
Wrapper for <a href="Ketrew_artifact.html#TYPEt"><code class="code"><span class="constructor">Ketrew_artifact</span>.t</code></a> and <code class="code"><span class="constructor">Ketrew_artifact</span>.<span class="constructor">Type</span>.t</code>.
</div>

<pre><span id="VALfile"><span class="keyword">val</span> <a href="code_VALKetrew_edsl.file.html">file</a></span> : <code class="type">?host:<a href="Ketrew_host.html#TYPEt">Ketrew_host.t</a> -> string -> <a href="Ketrew_edsl.user_artifact-c.html">user_artifact</a></code></pre><div class="info ">
Create a volume containing one file.<br>
</div>

<pre><span id="VALunit"><span class="keyword">val</span> <a href="code_VALKetrew_edsl.unit.html">unit</a></span> : <code class="type"><a href="Ketrew_edsl.user_artifact-c.html">user_artifact</a></code></pre><div class="info ">
The artifact that is “never ready” (i.e. the target associated will always
    be (re-)run if activated).<br>
</div>
<br>
<h3 id="3_Targets">Targets</h3><br>

<pre><span id="TYPEuser_target"><span class="keyword">class type</span> <a href="Ketrew_edsl.user_target-c.html">user_target</a></span> = <code class="code"><span class="keyword">object</span></code> <a href="Ketrew_edsl.user_target-c.html">..</a> <code class="code"><span class="keyword">end</span></code></pre><div class="info">
Wrapper around <a href="Ketrew_target.html#TYPEt"><code class="code"><span class="constructor">Ketrew_target</span>.t</code></a>.
</div>

<pre><span id="VALtarget"><span class="keyword">val</span> <a href="code_VALKetrew_edsl.target.html">target</a></span> : <code class="type">?active:bool -><br>       ?dependencies:<a href="Ketrew_edsl.user_target-c.html">user_target</a> list -><br>       ?make:<a href="Ketrew_target.html#TYPEbuild_process">Ketrew_target.build_process</a> -><br>       ?ready_when:<a href="Ketrew_target.Condition.html#TYPEt">Ketrew_target.Condition.t</a> -><br>       ?metadata:<a href="Ketrew_artifact.Value.html#TYPEt">Ketrew_artifact.Value.t</a> -> string -> <a href="Ketrew_edsl.user_target-c.html">user_target</a></code></pre><div class="info ">
Create a new target.<br>
</div>

<pre><span id="VALactive"><span class="keyword">val</span> <a href="code_VALKetrew_edsl.active.html">active</a></span> : <code class="type">?dependencies:<a href="Ketrew_edsl.user_target-c.html">user_target</a> list -><br>       ?make:<a href="Ketrew_target.html#TYPEbuild_process">Ketrew_target.build_process</a> -><br>       ?ready_when:<a href="Ketrew_target.Condition.html#TYPEt">Ketrew_target.Condition.t</a> -><br>       ?metadata:<a href="Ketrew_artifact.Value.html#TYPEt">Ketrew_artifact.Value.t</a> -> string -> <a href="Ketrew_edsl.user_target-c.html">user_target</a></code></pre><div class="info ">
Create a new target but with <code class="code">~active:<span class="keyword">true</span></code>.<br>
</div>

<pre><span id="VALdaemonize"><span class="keyword">val</span> <a href="code_VALKetrew_edsl.daemonize.html">daemonize</a></span> : <code class="type">?starting_timeout:float -><br>       ?using:[ `Nohup_setsid | `Python_daemon ] -><br>       ?host:<a href="Ketrew_host.html#TYPEt">Ketrew_host.t</a> -> <a href="Ketrew_edsl.Program.html#TYPEt">Program.t</a> -> <a href="Ketrew_target.html#TYPEbuild_process">Ketrew_target.build_process</a></code></pre><div class="info ">
Create a “daemonize” build process.<br>
</div>

<pre><span id="VALdirect_execution"><span class="keyword">val</span> <a href="code_VALKetrew_edsl.direct_execution.html">direct_execution</a></span> : <code class="type">?host:<a href="Ketrew_host.html#TYPEt">Ketrew_host.t</a> -> <a href="Ketrew_edsl.Program.html#TYPEt">Program.t</a> -> <a href="Ketrew_target.html#TYPEbuild_process">Ketrew_target.build_process</a></code></pre><div class="info ">
Create a direct process (not “long-running”).<br>
</div>

<pre><span id="VALdirect_shell_command"><span class="keyword">val</span> <a href="code_VALKetrew_edsl.direct_shell_command.html">direct_shell_command</a></span> : <code class="type">?host:<a href="Ketrew_host.html#TYPEt">Ketrew_host.t</a> -> string -> <a href="Ketrew_target.html#TYPEbuild_process">Ketrew_target.build_process</a></code></pre><div class="info ">
Shortcut for <code class="code">direct_execution ?host <span class="constructor">Program</span>.(sh cmd)</code>.<br>
</div>

<pre><span id="VALget_output"><span class="keyword">val</span> <a href="code_VALKetrew_edsl.get_output.html">get_output</a></span> : <code class="type">?host:<a href="Ketrew_host.html#TYPEt">Ketrew_host.t</a> -> <a href="Ketrew_edsl.Program.html#TYPEt">Program.t</a> -> <a href="Ketrew_target.html#TYPEbuild_process">Ketrew_target.build_process</a></code></pre><div class="info ">
Create a direct process (not “long-running”) that stores the output (i.e.
    <code class="code">stdout</code>) of the program.<br>
</div>

<pre><span id="VALlsf"><span class="keyword">val</span> <a href="code_VALKetrew_edsl.lsf.html">lsf</a></span> : <code class="type">?host:<a href="Ketrew_host.html#TYPEt">Ketrew_host.t</a> -><br>       ?queue:string -><br>       ?name:string -><br>       ?wall_limit:string -><br>       ?processors:[ `Min of int | `Min_max of int * int ] -><br>       <a href="Ketrew_edsl.Program.html#TYPEt">Program.t</a> -> <a href="Ketrew_target.html#TYPEbuild_process">Ketrew_target.build_process</a></code></pre><div class="info ">
Create an “LSF” build process.<br>
</div>
<br>
<h3 id="3_Workflows">Workflows</h3><br>

<pre><span id="VALrun"><span class="keyword">val</span> <a href="code_VALKetrew_edsl.run.html">run</a></span> : <code class="type">?plugins:(string * (module Ketrew_long_running.LONG_RUNNING)) list -><br>       ?override_configuration:<a href="Ketrew_configuration.html#TYPEt">Ketrew_configuration.t</a> -><br>       <a href="Ketrew_edsl.user_target-c.html">user_target</a> -> unit</code></pre><div class="info ">
Activate <code class="code">user_target</code> (the next time Ketrew runs a step, the target will
    started/run.<br>
</div>
</body></html>